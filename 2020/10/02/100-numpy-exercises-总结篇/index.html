<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="numpy," />










<meta name="description" content="查看numpy的版本和配置">
<meta property="og:type" content="article">
<meta property="og:title" content="100 numpy exercises 总结篇">
<meta property="og:url" content="http://yoursite.com/2020/10/02/100-numpy-exercises-%E6%80%BB%E7%BB%93%E7%AF%87/index.html">
<meta property="og:site_name" content="I am Art">
<meta property="og:description" content="查看numpy的版本和配置">
<meta property="article:published_time" content="2020-10-02T01:21:04.000Z">
<meta property="article:modified_time" content="2020-10-06T14:02:46.796Z">
<meta property="article:author" content="lzc">
<meta property="article:tag" content="numpy">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/10/02/100-numpy-exercises-总结篇/"/>





  <title>100 numpy exercises 总结篇 | I am Art</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/lzclzclzc12" target="_blank" rel="noopener"><img align = "left" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_left_darkblue_121621.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">I am Art</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
  
  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/02/100-numpy-exercises-%E6%80%BB%E7%BB%93%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lzc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="I am Art">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">100 numpy exercises 总结篇</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-10-02T09:21:04+08:00">
                2020-10-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/numpy/" itemprop="url" rel="index">
                    <span itemprop="name">numpy</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <span class="post-meta-divider">|</span>
            <span id="busuanzi_value_page_pv"></span>次阅读
          
          
          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  6.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  33
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="查看numpy的版本和配置"><a href="#查看numpy的版本和配置" class="headerlink" title="查看numpy的版本和配置"></a>查看numpy的版本和配置</h1><a id="more"></a>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">np.__version__     <span class="comment"># 查看版本</span></span><br><span class="line"></span><br><span class="line">np.show_config()  <span class="comment"># 查看配置</span></span><br></pre></td></tr></table></figure>
<h1 id="np-zeros"><a href="#np-zeros" class="headerlink" title="np.zeros"></a>np.zeros</h1><p>默认$dtype$是浮点型的0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.zeros(10)     <span class="comment"># 一维</span></span><br><span class="line">np.zeros((3 , 3))   <span class="comment"># 多维</span></span><br></pre></td></tr></table></figure>
<h1 id="np-ndarray-itemsize"><a href="#np-ndarray-itemsize" class="headerlink" title="np.ndarray.itemsize"></a>np.ndarray.itemsize</h1><p>查看$ndarray$中一个元素的<font color="red">内存</font></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randn(3 , 4)</span><br><span class="line"><span class="comment"># 输出：'float64' , 8 , 8 * 12 = 96(ndarray所占的内存)</span></span><br><span class="line"><span class="built_in">print</span>(a.dtype , a.itemsize , a.itemsize * a.size)</span><br></pre></td></tr></table></figure>
<h1 id="reverse一个vector"><a href="#reverse一个vector" class="headerlink" title="reverse一个vector"></a>reverse一个vector</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.arange(10)[::-1] <span class="comment"># 利用切片来转置</span></span><br></pre></td></tr></table></figure>
<h1 id="寻找ndarray的非0元素的下标"><a href="#寻找ndarray的非0元素的下标" class="headerlink" title="寻找ndarray的非0元素的下标"></a>寻找ndarray的非0元素的下标</h1><p>使用np.nonzero()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(12).reshape(3 , 4)</span><br><span class="line">a[1][1] = 0</span><br><span class="line"><span class="string">''</span><span class="string">' </span></span><br><span class="line"><span class="string">array([[ 0,  1,  2,  3],</span></span><br><span class="line"><span class="string">       [ 4,  0,  6,  7],</span></span><br><span class="line"><span class="string">       [ 8,  9, 10, 11]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">np.nonzero(a)  <span class="comment"># 由于是2维的，所以len = 2，返回值是tuple</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">(array([0, 0, 0, 1, 1, 1, 2, 2, 2, 2], dtype=int64),</span></span><br><span class="line"><span class="string"> array([1, 2, 3, 0, 2, 3, 0, 1, 2, 3], dtype=int64))</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="创建一个单位矩阵"><a href="#创建一个单位矩阵" class="headerlink" title="创建一个单位矩阵"></a>创建一个单位矩阵</h1><p>np.eye</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">np.eye(3 , 3)   <span class="comment"># dtype 为浮点型</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[1., 0., 0.],</span></span><br><span class="line"><span class="string">       [0., 1., 0.],</span></span><br><span class="line"><span class="string">       [0., 0., 1.]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-random-random"><a href="#np-random-random" class="headerlink" title="np.random.random()"></a>np.random.random()</h1><p>Return random floats in the half-open interval $[0.0, 1.0)$.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.random.random((3 , 3))</span><br></pre></td></tr></table></figure>
<h1 id="寻找ndarray的最大值和最小值"><a href="#寻找ndarray的最大值和最小值" class="headerlink" title="寻找ndarray的最大值和最小值"></a>寻找ndarray的最大值和最小值</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(12).reshape(3 , 4)</span><br><span class="line">a.max() <span class="comment"># 寻找最大值，11</span></span><br><span class="line">a.max(axis = 0)   <span class="comment"># 输出：array([ 8,  9, 10, 11])</span></span><br><span class="line">a.min()</span><br></pre></td></tr></table></figure>
<h1 id="使一个array的周围都是0"><a href="#使一个array的周围都是0" class="headerlink" title="使一个array的周围都是0"></a>使一个array的周围都是0</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a = np.ones((5 , 5))</span><br><span class="line">a[: , [0 , -1]] = 0</span><br><span class="line">a[[0 , -1] , :] = 0</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[0., 0., 0., 0., 0.],</span></span><br><span class="line"><span class="string">       [0., 1., 1., 1., 0.],</span></span><br><span class="line"><span class="string">       [0., 1., 1., 1., 0.],</span></span><br><span class="line"><span class="string">       [0., 1., 1., 1., 0.],</span></span><br><span class="line"><span class="string">       [0., 0., 0., 0., 0.]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-nan和np-inf的一些运算"><a href="#np-nan和np-inf的一些运算" class="headerlink" title="np.nan和np.inf的一些运算"></a>np.nan和np.inf的一些运算</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0 * np.nan <span class="comment"># nan</span></span><br><span class="line">np.nan == np.nan <span class="comment"># False</span></span><br><span class="line">np.inf &gt; np.nan , np.inf &lt; np.nan , np.inf == np.nan <span class="comment"># (False , False , False)</span></span><br><span class="line">np.nan - np.nan  <span class="comment"># nan</span></span><br><span class="line">np.inf - np.inf  <span class="comment"># nan</span></span><br><span class="line">np.nan <span class="keyword">in</span> <span class="built_in">set</span>([1 , 2 , np.nan])  <span class="comment"># True</span></span><br><span class="line"><span class="built_in">type</span>(np.nan)  <span class="comment"># float</span></span><br><span class="line">0.3 == 0.1 * 3  <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h1 id="np-diag-v-k"><a href="#np-diag-v-k" class="headerlink" title="np.diag(v , k)"></a>np.diag(v , k)</h1><p>v: array_like</p>
<p>按照k和v来判断矩阵的大小(是方阵)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">np.diag(1 + np.arange(4) , k = 1)  <span class="comment"># 对角线上一格  5 * 5</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[0, 1, 0, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 0, 2, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 0, 0, 3, 0],</span></span><br><span class="line"><span class="string">       [0, 0, 0, 0, 4],</span></span><br><span class="line"><span class="string">       [0, 0, 0, 0, 0]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">np.diag(1 + np.arange(4) , k = -1)   <span class="comment"># 对角线下一格  5 * 5</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="string">       [1, 0, 0, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 2, 0, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 0, 3, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 0, 0, 4, 0]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">np.diag(1 + np.arange(4) , k = 0)   <span class="comment"># 在对角线上  4 * 4</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[1, 0, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 2, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 0, 3, 0],</span></span><br><span class="line"><span class="string">       [0, 0, 0, 4]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="创建一个checkerboard-pattern的矩阵"><a href="#创建一个checkerboard-pattern的矩阵" class="headerlink" title="创建一个checkerboard pattern的矩阵"></a>创建一个checkerboard pattern的矩阵</h1><h2 id="方法1："><a href="#方法1：" class="headerlink" title="方法1："></a>方法1：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">a = np.ones((8 , 8) , dtype = <span class="string">'int'</span>)</span><br><span class="line">a[::2 , ::2] = 0</span><br><span class="line">a[1::2 , 1::2] = 0</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0],</span></span><br><span class="line"><span class="string">       [0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0],</span></span><br><span class="line"><span class="string">       [0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0],</span></span><br><span class="line"><span class="string">       [0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h2 id="方法2："><a href="#方法2：" class="headerlink" title="方法2："></a>方法2：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">np.tile(np.array([[0 , 1] , [1 , 0]]) , (4 , 4))</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[[0 , 1]</span></span><br><span class="line"><span class="string">[1 , 0]]  的块在axis = 0 和 axis = 1 上都重复4次</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0],</span></span><br><span class="line"><span class="string">       [0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0],</span></span><br><span class="line"><span class="string">       [0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0],</span></span><br><span class="line"><span class="string">       [0, 1, 0, 1, 0, 1, 0, 1],</span></span><br><span class="line"><span class="string">       [1, 0, 1, 0, 1, 0, 1, 0]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="给定一个array的维度，如何查看第i个元素的下标是多少"><a href="#给定一个array的维度，如何查看第i个元素的下标是多少" class="headerlink" title="给定一个array的维度，如何查看第i个元素的下标是多少"></a>给定一个array的维度，如何查看第i个元素的下标是多少</h1><p>np.unravel_index</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.unravel_index(99 , (6 , 7 , 8))  <span class="comment"># shape = (6 , 7 , 8)的第99个元素的小标为</span></span><br><span class="line"><span class="comment"># (1, 5, 3)</span></span><br></pre></td></tr></table></figure>
<h1 id="创建一个dtype来描述-RGBA"><a href="#创建一个dtype来描述-RGBA" class="headerlink" title="创建一个dtype来描述(RGBA)"></a>创建一个dtype来描述(RGBA)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dtype1 = np.dtype([(<span class="string">'r'</span> , np.ubyte) , (<span class="string">'g'</span> , np.ubyte) , (<span class="string">'b'</span> , np.ubyte) , (<span class="string">'a'</span> , np.ubyte)])   <span class="comment"># 创建好类型</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([(1 , 2 , 3 , 4) , (5 , 6 , 7 , 8)] , dtype = dtype1)</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([(1, 2, 3, 4), (5, 6, 7, 8)],</span></span><br><span class="line"><span class="string">      dtype=[('</span>r<span class="string">', '</span>u1<span class="string">'), ('</span>g<span class="string">', '</span>u1<span class="string">'), ('</span>b<span class="string">', '</span>u1<span class="string">'), ('</span>a<span class="string">', '</span>u1<span class="string">')])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="将array中大于3且小于8的数取反"><a href="#将array中大于3且小于8的数取反" class="headerlink" title="将array中大于3且小于8的数取反"></a>将array中大于3且小于8的数取反</h1><p>用与运算</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(11)</span><br><span class="line">a[(a &gt; 3) &amp; (a &lt; 8)]</span><br></pre></td></tr></table></figure>
<h1 id="求两个array的交集"><a href="#求两个array的交集" class="headerlink" title="求两个array的交集"></a>求两个array的交集</h1><p>np.intersect1d：求交集</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([1 , 2 , 4 , 3 , 5])</span><br><span class="line">b = np.array([4 , 3 , 9 , 8])</span><br><span class="line">np.intersect1d(a , b)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([3, 4])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="获取当前的今天和明天的日期"><a href="#获取当前的今天和明天的日期" class="headerlink" title="获取当前的今天和明天的日期"></a>获取当前的今天和明天的日期</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = np.datetime64(<span class="string">'today'</span>)  <span class="comment"># 获取今天的日期</span></span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">numpy.datetime64('</span>2020-10-2<span class="string">')</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">b = a + np.timedelta64(1 , <span class="string">'D'</span>)</span><br><span class="line">b</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">numpy.datetime64('</span>2020-10-3<span class="string">')</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = pd.Timestamp(a)</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Timestamp('</span>2020-10-02 00:00:00<span class="string">')</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">a.year    <span class="comment"># 获取年</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">2020</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="获取2016年7月的全部日期（以天为单位）"><a href="#获取2016年7月的全部日期（以天为单位）" class="headerlink" title="获取2016年7月的全部日期（以天为单位）"></a>获取2016年7月的全部日期（以天为单位）</h1><p>修改dtye使得字符串变为时间</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">np.arange(<span class="string">'2016-07'</span> , <span class="string">'2016-08'</span> , dtype = <span class="string">'datetime64[D]'</span>) <span class="comment"># 换成Y就是年为单位，换成M就是月为单位</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array(['</span>2016-07-01<span class="string">', '</span>2016-07-02<span class="string">', '</span>2016-07-03<span class="string">', '</span>2016-07-04<span class="string">',</span></span><br><span class="line"><span class="string">       '</span>2016-07-05<span class="string">', '</span>2016-07-06<span class="string">', '</span>2016-07-07<span class="string">', '</span>2016-07-08<span class="string">',</span></span><br><span class="line"><span class="string">       '</span>2016-07-09<span class="string">', '</span>2016-07-10<span class="string">', '</span>2016-07-11<span class="string">', '</span>2016-07-12<span class="string">',</span></span><br><span class="line"><span class="string">       '</span>2016-07-13<span class="string">', '</span>2016-07-14<span class="string">', '</span>2016-07-15<span class="string">', '</span>2016-07-16<span class="string">',</span></span><br><span class="line"><span class="string">       '</span>2016-07-17<span class="string">', '</span>2016-07-18<span class="string">', '</span>2016-07-19<span class="string">', '</span>2016-07-20<span class="string">',</span></span><br><span class="line"><span class="string">       '</span>2016-07-21<span class="string">', '</span>2016-07-22<span class="string">', '</span>2016-07-23<span class="string">', '</span>2016-07-24<span class="string">',</span></span><br><span class="line"><span class="string">       '</span>2016-07-25<span class="string">', '</span>2016-07-26<span class="string">', '</span>2016-07-27<span class="string">', '</span>2016-07-28<span class="string">',</span></span><br><span class="line"><span class="string">       '</span>2016-07-29<span class="string">', '</span>2016-07-30<span class="string">', '</span>2016-07-31<span class="string">'], dtype='</span>datetime64[D]<span class="string">')</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="提取正数的整数部分-4-种方法"><a href="#提取正数的整数部分-4-种方法" class="headerlink" title="提取正数的整数部分 (4 种方法)"></a>提取正数的整数部分 (4 种方法)</h1><p>有关np.where的用法，参考：<a href="https://www.cnblogs.com/massquantity/p/8908859.html" target="_blank" rel="noopener">https://www.cnblogs.com/massquantity/p/8908859.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.uniform(-5 , 10 , 10)</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([-1.16420344,  3.95631045,  7.34675534,  8.03188626,  9.04815034,</span></span><br><span class="line"><span class="string">        6.5529346 , -1.46680238,  7.35797919,  3.9921186 , -3.76588798])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法1：</span></span><br><span class="line">np.where(a &gt; 0 , a - a%1 , a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2：</span></span><br><span class="line">np.where(a &gt; 0 , a // 1 , a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法3：</span></span><br><span class="line">np.where(a &gt; 0 , np.floor(a) , a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法4：</span></span><br><span class="line">np.where(a &gt; 0 , a.astype(int) , a)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([-1.16420344,  3.        ,  7.        ,  8.        ,  9.        ,</span></span><br><span class="line"><span class="string">        6.        , -1.46680238,  7.        ,  3.        , -3.76588798])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-trunc"><a href="#np-trunc" class="headerlink" title="np.trunc"></a>np.trunc</h1><p>np.trunc: 此函数返回输入数组元素的截断值。输入值$x$的截断值$t$是<font color="red">更接近0的整数</font>, 比$x$更接近零。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([-4.5375666 ,  1.54911477, -3.74455161, -2.41802724,  3.17252821, 8.00279135, -4.8008351 ,  5.53268438, -2.19521765,  8.72607842])</span><br><span class="line">np.trunc(a)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([-4.,  1., -3., -2.,  3.,  8., -4.,  5., -2.,  8.]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对比np.floor，是取更小的元素</span></span><br><span class="line">np.floor(a)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([-5.,  1., -4., -3.,  3.,  8., -5.,  5., -3.,  8.])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="利用生成器方法来生成一个array"><a href="#利用生成器方法来生成一个array" class="headerlink" title="利用生成器方法来生成一个array"></a>利用生成器方法来生成一个array</h1><p>np.fromiter: Create a new 1-dimensional array from an <font color="red">iterable object</font>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def func(n):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        yield i      <span class="comment"># 使得方法变成了生成器</span></span><br><span class="line"></span><br><span class="line">np.formiter(func(10) , dtype = <span class="built_in">float</span>)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([0., 1., 2., 3., 4., 5., 6., 7., 8., 9.])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-add-reduce-ndarray-axis"><a href="#np-add-reduce-ndarray-axis" class="headerlink" title="np.add.reduce(ndarray , axis)"></a>np.add.reduce(ndarray , axis)</h1><p>比np.sum更快</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a = array([1 , 2 , 3 , 4])</span><br><span class="line">np.add.reduce(a)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">10</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line">a = np.arange(12).reshape(3 , 4)</span><br><span class="line">np.add.reduce(a , axis = 0)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([12, 15, 18, 21])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="使一个array-只读-read-only"><a href="#使一个array-只读-read-only" class="headerlink" title="使一个array 只读(read-only)"></a>使一个array 只读(read-only)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([1 , 2 , 3])</span><br><span class="line">a.flags.writeable = False  <span class="comment">#写权限为 False</span></span><br></pre></td></tr></table></figure>
<h1 id="将直角坐标变为极坐标"><a href="#将直角坐标变为极坐标" class="headerlink" title="将直角坐标变为极坐标"></a>将直角坐标变为极坐标</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randn(10 , 2)  <span class="comment"># 直角坐标</span></span><br><span class="line">x = a[: , 0]</span><br><span class="line">y = a[: , 1]</span><br><span class="line"></span><br><span class="line">R = np.sqrt(x ** 2 + y ** 2)  <span class="comment"># 求长度</span></span><br><span class="line">T = np.arctan2(y , x)   <span class="comment"># 弧度制  求角度</span></span><br></pre></td></tr></table></figure>
<p>np.arctan2(y , x) 求出来的范围是$[-pi , pi]$</p>
<p>而np.arctan(y / x) 的范围是$[-pi/2 , pi/2]$</p>
<h1 id="将矩阵的每列的最小值置1-特殊的切片方式"><a href="#将矩阵的每列的最小值置1-特殊的切片方式" class="headerlink" title="将矩阵的每列的最小值置1 (特殊的切片方式)"></a>将矩阵的每列的最小值置1 (<font color="red">特殊的切片方式</font>)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randn(5 , 5)</span><br><span class="line">a[np.argmin(a) , np.arange(5)] = 1</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 1.03741769,  1.        ,  0.04588491, -1.56846048, -0.69702655],</span></span><br><span class="line"><span class="string">       [ 0.07827971,  0.66178652,  1.        , -0.15189357, -0.93276632],</span></span><br><span class="line"><span class="string">       [ 0.48678279, -1.4055491 ,  1.5417915 , -0.18737426,  0.40157406],</span></span><br><span class="line"><span class="string">       [ 1.        ,  0.49162913, -1.27824055, -0.04964457,  1.        ],</span></span><br><span class="line"><span class="string">       [-0.91942993, -0.527093  , -2.30232503,  1.        , -0.74834252]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="求-0-1-x-1-0-区域内所有坐标"><a href="#求-0-1-x-1-0-区域内所有坐标" class="headerlink" title="求[0,1]x[1,0]区域内所有坐标"></a>求[0,1]x[1,0]区域内所有坐标</h1><p>np.meshgrid: 生成网格坐标</p>
<p>np.linspace: 生成等差数列</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.ones((5 , 5) , dtype = [(<span class="string">'x'</span> , np.float) , (<span class="string">'y'</span> , np.float)])</span><br><span class="line"></span><br><span class="line">a[<span class="string">'x'</span>] , a[<span class="string">'y'</span>] = np.meshgrid(np.linspace(0 , 1 , 5) , np.linspace(0 , 1 , 5))</span><br><span class="line">a   <span class="comment"># 所有坐标</span></span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[(0.  , 0.  ), (0.25, 0.  ), (0.5 , 0.  ), (0.75, 0.  ),(1.  , 0.  )],</span></span><br><span class="line"><span class="string">       [(0.  , 0.25), (0.25, 0.25), (0.5 , 0.25), (0.75, 0.25),(1.  , 0.25)],</span></span><br><span class="line"><span class="string">       [(0.  , 0.5 ), (0.25, 0.5 ), (0.5 , 0.5 ), (0.75, 0.5 ),(1.  , 0.5 )],</span></span><br><span class="line"><span class="string">       [(0.  , 0.75), (0.25, 0.75), (0.5 , 0.75), (0.75, 0.75),(1.  , 0.75)],</span></span><br><span class="line"><span class="string">       [(0.  , 1.  ), (0.25, 1.  ), (0.5 , 1.  ), (0.75, 1.  ),(1.  , 1.  )]], dtype=[('</span>x<span class="string">', '</span>&lt;f8<span class="string">'), ('</span>y<span class="string">', '</span>&lt;f8<span class="string">')])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h2 id="np-meshgrid"><a href="#np-meshgrid" class="headerlink" title="np.meshgrid"></a>np.meshgrid</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对于2维矩阵来说，如果x坐标分成n份，y坐标分成m份，那么x的坐标矩阵就是mxn，y的坐标矩阵也是mxn</span></span><br><span class="line">np.meshgrid(np.linspace(0 , 1 , 5) , np.linspace(0 , 1 , 4))</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[array([[0.  , 0.25, 0.5 , 0.75, 1.  ],</span></span><br><span class="line"><span class="string">        [0.  , 0.25, 0.5 , 0.75, 1.  ],</span></span><br><span class="line"><span class="string">        [0.  , 0.25, 0.5 , 0.75, 1.  ],</span></span><br><span class="line"><span class="string">        [0.  , 0.25, 0.5 , 0.75, 1.  ]]),</span></span><br><span class="line"><span class="string"> array([[0.        , 0.        , 0.        , 0.        , 0.        ],</span></span><br><span class="line"><span class="string">        [0.33333333, 0.33333333, 0.33333333, 0.33333333, 0.33333333],</span></span><br><span class="line"><span class="string">        [0.66666667, 0.66666667, 0.66666667, 0.66666667, 0.66666667],</span></span><br><span class="line"><span class="string">        [1.        , 1.        , 1.        , 1.        , 1.        ]])]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-subtract-outer"><a href="#np-subtract-outer" class="headerlink" title="np.subtract.outer"></a>np.subtract.outer</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">np.subtract.outer(x , y):</span><br><span class="line">x: (1 , n)</span><br><span class="line">y: (1 , m)</span><br><span class="line">res: (n , m)，其中res[i][j] = x[i] - y[j]</span><br><span class="line"></span><br><span class="line">x = np.array([5 , 6 , 7 , 9])</span><br><span class="line">y = np.array([2 , 3 , 4])</span><br><span class="line">np.subtract.outer(x , y)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[3, 2, 1],</span></span><br><span class="line"><span class="string">       [4, 3, 2],</span></span><br><span class="line"><span class="string">       [5, 4, 3],</span></span><br><span class="line"><span class="string">       [7, 6, 5]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<p>np.add.outer 也是类似</p>
<h1 id="查看numpy的各种类型的最大值和最小值"><a href="#查看numpy的各种类型的最大值和最小值" class="headerlink" title="查看numpy的各种类型的最大值和最小值"></a>查看numpy的各种类型的最大值和最小值</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> dtype <span class="keyword">in</span> (np.int16 , np.int32 , np.int64):</span><br><span class="line">    <span class="built_in">print</span>(np.iinfo(dtype).max , np.iinfo(dtype).min)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="keyword">for</span> dtype <span class="keyword">in</span> (np.float16 , np.float32 , np.float64):</span><br><span class="line">    <span class="built_in">print</span>(np.finfo(dtype).max , np.finfo(dtype).min)</span><br></pre></td></tr></table></figure>
<h1 id="np-atleast-2d"><a href="#np-atleast-2d" class="headerlink" title="np.atleast_2d"></a>np.atleast_2d</h1><p>输入：arys1, arys2, … : array_like</p>
<p>函数作用：View inputs as arrays with at least <font color="red">two dimensions</font>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(12).reshape(6 , 2)</span><br><span class="line">b , c = np.atleast_2d(a[: , 0] , a[: , 1])</span><br><span class="line">b.shape , a[: , 0].shape</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">((1, 6), (6,))</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.atleast_2d(1 , 2 , [1 , 2])  <span class="comment"># 都转为2d 的shape</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[array([[1]]), array([[2]]), array([[1, 2]])]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="scipy-spatial-distance-cdist"><a href="#scipy-spatial-distance-cdist" class="headerlink" title="scipy.spatial.distance.cdist"></a>scipy.spatial.distance.cdist</h1><p>更快地计算两点之间的距离</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Parameters</span><br><span class="line">----------</span><br><span class="line">XA：ndarray , 第一个点的坐标集合，shape:(n , m)，n是点的个数，m是点的坐标数量（比如是2d的就是x和y，如果是3d的就是x、y和z）。</span><br><span class="line">XB：ndarray , 第二个点的坐标集合</span><br><span class="line">metric：str or callable, optional，可选择计算什么距离</span><br><span class="line">----------</span><br><span class="line"><span class="built_in">return</span>: ndarray，shape = (XA.shape[0] , XB.shape[0])，其中res[i][j] = XA[i]和XB[j]的距离</span><br><span class="line"></span><br><span class="line">可参考：https://blog.csdn.net/kancy110/article/details/75675574</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import scipy.spatial</span><br><span class="line">a = np.arange(4 , 3)  <span class="comment"># 3d 坐标</span></span><br><span class="line">scipy.spatial.distance.cdist(a , a , metric=<span class="string">'euclidean'</span>) <span class="comment"># 计算欧式距离（默认）</span></span><br></pre></td></tr></table></figure>
<h1 id="原地将float32-转为-int32"><a href="#原地将float32-转为-int32" class="headerlink" title="原地将float32 转为 int32"></a>原地将float32 转为 int32</h1><p>使用np.ndarray.view</p>
<p>numpy.ndarray.view中，提供对内存区域不同的切割方式，来完成数据类型的转换，而无须要对数据进行额外的copy，来节约内存空间。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">a = (np.random.rand(10) * 100).astype(np.float32)</span><br><span class="line">b = a.view(np.int32)  </span><br><span class="line"><span class="built_in">print</span>(id(a) , id(b))  <span class="comment"># 虽然a 和 b 的地址不同，但是共享内存 ，修改b ，a 也会改变</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">121892256 122304432</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"><span class="built_in">print</span>(np.shares_memory(a , b))   <span class="comment"># 是否共享内存</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">True  </span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">b[:] = a  <span class="comment"># 这样保证了 赋值后 b 的 dtype 不变 如果 用 b = a 的话，b 会完全成为 a </span></span><br><span class="line"><span class="built_in">print</span>(b , <span class="built_in">type</span>(b))</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[38 62 27 52 66 84 90 25  9 13] &lt;class '</span>numpy.ndarray<span class="string">'&gt;</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"><span class="built_in">print</span>(a)    <span class="comment"># 由于 修改了 b，所以 a 发生了改变 </span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[5.32e-44 8.69e-44 3.78e-44 7.29e-44 9.25e-44 1.18e-43 1.26e-43 3.50e-44 1.26e-44 1.82e-44]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-ndenumerate"><a href="#np-ndenumerate" class="headerlink" title="np.ndenumerate"></a>np.ndenumerate</h1><p>numpy array 的 enumerate</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(6).reshape(2 , 3)</span><br><span class="line"><span class="keyword">for</span> i , v <span class="keyword">in</span> np.ndenumerate(a):  <span class="comment"># 获取index 和相对应的值</span></span><br><span class="line">    <span class="built_in">print</span>(i , v)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">(0, 0) 0</span></span><br><span class="line"><span class="string">(0, 1) 1</span></span><br><span class="line"><span class="string">(0, 2) 2</span></span><br><span class="line"><span class="string">(1, 0) 3</span></span><br><span class="line"><span class="string">(1, 1) 4</span></span><br><span class="line"><span class="string">(1, 2) 5</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(6).reshape(6)</span><br><span class="line"><span class="keyword">for</span> i , v <span class="keyword">in</span> np.ndenumerate(a):</span><br><span class="line">    <span class="built_in">print</span>(i , v)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">(0,) 0</span></span><br><span class="line"><span class="string">(1,) 1</span></span><br><span class="line"><span class="string">(2,) 2</span></span><br><span class="line"><span class="string">(3,) 3</span></span><br><span class="line"><span class="string">(4,) 4</span></span><br><span class="line"><span class="string">(5,) 5</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-ndindex"><a href="#np-ndindex" class="headerlink" title="np.ndindex"></a>np.ndindex</h1><p>用于获取ndarray 的 index</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(6).reshape(2 , 3)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.ndindex(a.shape):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">(0, 0)</span></span><br><span class="line"><span class="string">(0, 1)</span></span><br><span class="line"><span class="string">(0, 2)</span></span><br><span class="line"><span class="string">(1, 0)</span></span><br><span class="line"><span class="string">(1, 1)</span></span><br><span class="line"><span class="string">(1, 2)</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="生成一个2D-Gaussian-like-array"><a href="#生成一个2D-Gaussian-like-array" class="headerlink" title="生成一个2D Gaussian-like array"></a>生成一个2D Gaussian-like array</h1><p>这里不是生成一个array，其符合高斯分布，而是其坐标中$y$是$x$的<font color="red">高斯函数</font></p>
<p>高斯函数：$f(x)=a e^{-\frac{(x-b)^{2}}{2 c^{2}}}$</p>
<ul>
<li>a表示得到曲线的高度；</li>
<li>b(μ)是指曲线在x轴的中心；</li>
<li>c(σ)指width(与半峰全宽有关)；</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x , y = np.meshgrid(np.linspace(-1 , 1 , 10) , np.linspace(-1 , 1 , 10)) <span class="comment"># 生成网格坐标</span></span><br><span class="line">mu = 0</span><br><span class="line">sigma = 1</span><br><span class="line">a = 1</span><br><span class="line">r = np.sqrt(x ** 2 + y ** 2)</span><br><span class="line">G = a * np.exp(-(r - mu) / (2 * (sigma) ** 2))  <span class="comment"># 带入高斯公式</span></span><br></pre></td></tr></table></figure>
<h2 id="高斯函数和正态分布"><a href="#高斯函数和正态分布" class="headerlink" title="高斯函数和正态分布"></a>高斯函数和正态分布</h2><p>高斯函数只是一种函数；</p>
<p>而正态分布是一个随机变量$x$，其概率密度符合高斯函数：</p>
<script type="math/tex; mode=display">f(x)=\frac{1}{\sqrt{2 \pi} \sigma} \exp \left(-\frac{(x-\mu)^{2}}{2 \sigma^{2}}\right)</script><p>那么$x$就符合正态分布</p>
<h1 id="np-put"><a href="#np-put" class="headerlink" title="np.put"></a>np.put</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Parameters</span><br><span class="line">----------</span><br><span class="line">a : ndarray</span><br><span class="line">    Target array.  要放入的ndarray</span><br><span class="line">ind : array_like</span><br><span class="line">    Target indices, interpreted as integers.  要放入的位置</span><br><span class="line">v : array_like</span><br><span class="line">    要放入的数字，如果len(v) &lt; len(ind)，那么就要重复v来填充</span><br><span class="line">mode : &#123;<span class="string">'raise'</span>, <span class="string">'wrap'</span>, <span class="string">'clip'</span>&#125;, optional</span><br><span class="line">    Specifies how out-of-bounds indices will behave.  越界后的处理，默认是<span class="string">'raise'</span>，即报错</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(12)</span><br><span class="line">np.put(a, [1 , 2 , 3 , 4 , 5], [100 , 1000])</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([   0,  100, 1000,  100, 1000,  100,    6,    7,   -5,    9,   10,   -5])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-random-choice"><a href="#np-random-choice" class="headerlink" title="np.random.choice"></a>np.random.choice</h1><p>在指定范围内随机选择几个数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.random.choice(range(10*10) , 3 , replace = False)  <span class="comment"># replace: 是否可以重复采样</span></span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([45, 94, 47])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="keepdims-参数"><a href="#keepdims-参数" class="headerlink" title="keepdims 参数"></a>keepdims 参数</h1><p>就是保留原来ndarray的一些维度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 比如:</span></span><br><span class="line">a = np.random.randn(5 , 4)</span><br><span class="line">a.mean(axis = 1).shape , a.mean(axis = 1 , keepdims = True).shape</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">((5,), (5, 1))</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"><span class="comment"># 如果没有keepdims，那么输出的维度就有问题</span></span><br><span class="line"><span class="comment"># 比如:</span></span><br><span class="line">a -= a.mean(axis = 1 , keepdims = True) <span class="comment"># 如果不加keepdims，那么广播的时候会出问题</span></span><br></pre></td></tr></table></figure>
<h1 id="数组按第n列排序"><a href="#数组按第n列排序" class="headerlink" title="数组按第n列排序"></a>数组按第n列排序</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randn(5 , 5)</span><br><span class="line">a[a[: , 1].argsort()]  <span class="comment"># 按第1列排序，得到行索引</span></span><br></pre></td></tr></table></figure>
<h1 id="np-flat"><a href="#np-flat" class="headerlink" title="np.flat"></a>np.flat</h1><p>当多维数组用一维坐标访问时用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">61. Find the nearest value from a given value <span class="keyword">in</span> an array (★★☆)</span><br><span class="line"></span><br><span class="line">a = np.random.randn(3 , 3)</span><br><span class="line">b = 0</span><br><span class="line">a.flat[np.abs(a - b).argmin()]   <span class="comment"># argmin 得到的是 一维的坐标，访问一维坐标用  np.ndarray.flat</span></span><br></pre></td></tr></table></figure>
<h1 id="np-bincount"><a href="#np-bincount" class="headerlink" title="np.bincount"></a>np.bincount</h1><p>详细，参考：<a href="https://blog.csdn.net/xlinsist/article/details/51346523" target="_blank" rel="noopener">https://blog.csdn.net/xlinsist/article/details/51346523</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randint(0 , 10 , 10)</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([0, 1, 1, 3, 1, 0, 7, 4, 0, 4])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">np.bincount(a)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([3, 3, 0, 1, 2, 0, 0, 1], dtype=int64)</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">65. How to accumulate elements of a vector (X) to an array (F) based on an index list (I)? (★★★)</span><br><span class="line"></span><br><span class="line">x = np.array([1 , 2 , 3 , 10 , 5])</span><br><span class="line">i = np.array([1 , 3 , 2 , 1 , 4])</span><br><span class="line">F = np.bincount(i , x) <span class="comment"># i 是 x , x 是 weights</span></span><br><span class="line">F</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([ 0., 11.,  3.,  2.,  5.])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">64. Consider a given vector, how to add 1 to each element indexed by a second vector (be careful with repeated indices)? (★★★)</span><br><span class="line"></span><br><span class="line">a = np.ones(10)</span><br><span class="line">i = np.random.randint(0 , len(a) , 20)</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[7 0 4 6 2 8 5 6 4 2 5 2 0 0 7 4 1 7 6 8]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">a += np.bincount(i , minlength = len(a))</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([4., 2., 4., 1., 4., 3., 4., 4., 3., 1.])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">68. Considering a one-dimensional vector D, how to compute means of subsets of D using a vector S of same size describing subset indices? (★★★)</span><br><span class="line"></span><br><span class="line">sum_v = np.bincount(S , weights = D)</span><br><span class="line">sum_k = np.bincount(S)</span><br><span class="line">sum_v / sum_k</span><br></pre></td></tr></table></figure>
<h1 id="np-unique"><a href="#np-unique" class="headerlink" title="np.unique"></a>np.unique</h1><p>返回一个array的唯一的值序列，结果会排序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">66. Considering a (w,h,3) image of (dtype=ubyte), compute the number of unique colors (★★★)</span><br><span class="line"></span><br><span class="line">w , h = (16 , 16)</span><br><span class="line">img = (np.random.uniform(0. , 255. , (w , h , 3))).astype(np.ubyte)</span><br><span class="line"><span class="built_in">print</span>(np.unique(img))</span><br></pre></td></tr></table></figure>
<h1 id="在切片时加-None，补充一维"><a href="#在切片时加-None，补充一维" class="headerlink" title="在切片时加 None，补充一维"></a>在切片时加 None，补充一维</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a[: , : , None].shape , a[: , None , :].shape , a[None , : , :].shape , a[1:2 , : , None].shape</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">((3, 4, 1), (3, 1, 4), (1, 3, 4), (1, 4, 1))</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="如何交换array的一行"><a href="#如何交换array的一行" class="headerlink" title="如何交换array的一行"></a>如何交换array的一行</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">72. How to swap two rows of an array? (★★★)</span><br><span class="line"></span><br><span class="line">a = np.arange(12).reshape(3 , 4)</span><br><span class="line">a[[0 , 1]] = a[[1 , 0]]   <span class="comment"># 2d 的时候</span></span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 4,  5,  6,  7],</span></span><br><span class="line"><span class="string">       [ 0,  1,  2,  3],</span></span><br><span class="line"><span class="string">       [ 8,  9, 10, 11]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-ndarray-repeat"><a href="#np-ndarray-repeat" class="headerlink" title="np.ndarray.repeat"></a>np.ndarray.repeat</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 4,  5,  6,  7],</span></span><br><span class="line"><span class="string">       [ 0,  1,  2,  3],</span></span><br><span class="line"><span class="string">       [ 8,  9, 10, 11]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line">a.repeat(2 , axis = 1)   <span class="comment"># 每列重复两次</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 4,  4,  5,  5,  6,  6,  7,  7],</span></span><br><span class="line"><span class="string">       [ 0,  0,  1,  1,  2,  2,  3,  3],</span></span><br><span class="line"><span class="string">       [ 8,  8,  9,  9, 10, 10, 11, 11]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-roll"><a href="#np-roll" class="headerlink" title="np.roll"></a>np.roll</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Parameters</span><br><span class="line">----------</span><br><span class="line">a : array_like</span><br><span class="line">        Input array.</span><br><span class="line"><span class="built_in">shift</span> : int or tuple of ints</span><br><span class="line">        The number of places by <span class="built_in">which</span> elements are shifted.  If a tuple,</span><br><span class="line">        <span class="keyword">then</span> `axis` must be a tuple of the same size, and each of the</span><br><span class="line">        given axes is shifted by the corresponding number.  If an int</span><br><span class="line">        <span class="keyword">while</span> `axis` is a tuple of ints, <span class="keyword">then</span> the same value is used <span class="keyword">for</span></span><br><span class="line">        all given axes. 负数是反方向移动</span><br><span class="line">axis</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(12).reshape(3 , 4)</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 0,  1,  2,  3],</span></span><br><span class="line"><span class="string">       [ 4,  5,  6,  7],</span></span><br><span class="line"><span class="string">       [ 8,  9, 10, 11]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line">np.roll(a , (1 , 2) , axis = (0 , 1))  <span class="comment"># 行向下移动1格，列上右移动两格</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[10, 11,  8,  9],</span></span><br><span class="line"><span class="string">       [ 2,  3,  0,  1],</span></span><br><span class="line"><span class="string">       [ 6,  7,  4,  5]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line">np.roll(a , (1 , 2)) <span class="comment"># 行和列均先移动一个，再移动2格</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 9, 10, 11,  0],</span></span><br><span class="line"><span class="string">       [ 1,  2,  3,  4],</span></span><br><span class="line"><span class="string">       [ 5,  6,  7,  8]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line">np.roll(a , (-2 , 2))  <span class="comment"># 相当于没移动</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 0,  1,  2,  3],</span></span><br><span class="line"><span class="string">       [ 4,  5,  6,  7],</span></span><br><span class="line"><span class="string">       [ 8,  9, 10, 11]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">73. Consider a <span class="built_in">set</span> of 10 triplets describing 10 triangles (with shared vertices), find the <span class="built_in">set</span> of unique line segments composing all the triangles (★★★) </span><br><span class="line"></span><br><span class="line">题意：使用10个三元数的集合描述10个三角形，找出组成这些三角形边的集合</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">a = np.random.randint(0 , 100 , (10 , 3))</span><br><span class="line">b = np.roll(a.repeat(2 , axis = 1) , -1 , axis = 1)</span><br><span class="line">b = b.reshape(len(b) * 3 , 2)</span><br><span class="line">b = b.view(dtype = [(<span class="string">'p0'</span> , b.dtype) , (<span class="string">'p1'</span> , b.dtype)]) <span class="comment"># 使用view 来将原数组切分成二元组</span></span><br><span class="line">c = np.unique(b)</span><br><span class="line">c</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([( 6, 57), (10, 22), (11, 21), (11, 41), (21, 42), (21, 87),</span></span><br><span class="line"><span class="string">       (22, 30), (30, 10), (40, 11), (41, 40), (42, 65), (45, 93),</span></span><br><span class="line"><span class="string">       (51, 88), (52, 75), (53, 82), (57, 84), (58, 45), (62, 66),</span></span><br><span class="line"><span class="string">       (65, 21), (66, 97), (70, 52), (75, 70), (82, 93), (84,  6),</span></span><br><span class="line"><span class="string">       (86, 51), (87, 11), (88, 86), (93, 53), (93, 58), (97, 62)],</span></span><br><span class="line"><span class="string">      dtype=[('</span>p0<span class="string">', '</span>&lt;i4<span class="string">'), ('</span>p1<span class="string">', '</span>&lt;i4<span class="string">')])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-repeat"><a href="#np-repeat" class="headerlink" title="np.repeat"></a>np.repeat</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Parameters</span><br><span class="line">----------</span><br><span class="line">a : array_like</span><br><span class="line">       Input array.</span><br><span class="line">repeats : int or array of ints</span><br><span class="line">       The number of repetitions <span class="keyword">for</span> each element.  `repeats` is broadcasted</span><br><span class="line">        to fit the shape of the given axis.</span><br><span class="line">axis : int, optional</span><br><span class="line">       The axis along <span class="built_in">which</span> to repeat values.  By default, use the</span><br><span class="line">        flattened input array, and <span class="built_in">return</span> a flat output array.</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">np.repeat(np.arange(5) , [1 , 2 , 1 , 2 , 0])</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([0, 1, 1, 2, 3, 3])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">np.repeat(np.arange(5) , 2)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([0, 0, 1, 1, 2, 2, 3, 3, 4, 4])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">74. Given an array C that is a bincount, how to produce an array A such that np.bincount(A) == C? (★★★)</span><br><span class="line"></span><br><span class="line">c = np.bincount([1,1,2,3,4,4,6])</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[0 2 1 1 2 0 1]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">a = np.repeat(np.arange(len(c)) , repeats = c)</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([1, 1, 2, 3, 4, 4, 6])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-cumsum"><a href="#np-cumsum" class="headerlink" title="np.cumsum"></a>np.cumsum</h1><p>Return the cumulative sum of the elements along a given axis. 即前缀和</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(5)</span><br><span class="line">np.cumsum(a , dtype = <span class="string">'float64'</span>)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([ 0.,  1.,  3.,  6., 10.])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">75. How to compute averages using a sliding window over an array? (★★★)</span><br><span class="line"></span><br><span class="line">def Sliding_Window(a , n):</span><br><span class="line">    ret = np.cumsum(a , dtype = <span class="string">'float64'</span>)  <span class="comment"># 先算前缀和</span></span><br><span class="line">    ret[n:] -= ret[:-n]    <span class="comment"># 这里 ret[i] - ret[i - n] 得到每一块的和</span></span><br><span class="line">    ret[n-1:] /= n</span><br><span class="line">    <span class="built_in">return</span> ret[n-1:]</span><br><span class="line"></span><br><span class="line">a = np.arange(20)</span><br><span class="line"><span class="built_in">print</span>(Sliding_Window(a , 3))</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10. 11. 12. 13. 14. 15. 16. 17. 18.]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="stride-tricks-as-strided"><a href="#stride-tricks-as-strided" class="headerlink" title="stride_tricks.as_strided"></a>stride_tricks.as_strided</h1><p>有关stride_tricks.as_strided 的用法，参考:<a href="https://zhuanlan.zhihu.com/p/64933417" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/64933417</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">76. Consider a one-dimensional array Z, build a two-dimensional array whose first row is (Z[0],Z[1],Z[2]) and each subsequent row is shifted by 1 (last row should be (Z[-3],Z[-2],Z[-1]) (★★★)</span><br><span class="line"></span><br><span class="line">from numpy.lib import stride_tricks</span><br><span class="line"></span><br><span class="line">def rolling(a , n):</span><br><span class="line">    shape = (a.size - n + 1 , n)</span><br><span class="line">    stride = (a.itemsize , a.itemsize)</span><br><span class="line">    b = stride_tricks.as_strided(a , shape , stride)</span><br><span class="line">    <span class="built_in">return</span> b</span><br><span class="line"></span><br><span class="line">rolling(np.arange(10) , 3)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[0, 1, 2],</span></span><br><span class="line"><span class="string">       [1, 2, 3],</span></span><br><span class="line"><span class="string">       [2, 3, 4],</span></span><br><span class="line"><span class="string">       [3, 4, 5],</span></span><br><span class="line"><span class="string">       [4, 5, 6],</span></span><br><span class="line"><span class="string">       [5, 6, 7],</span></span><br><span class="line"><span class="string">       [6, 7, 8],</span></span><br><span class="line"><span class="string">       [7, 8, 9]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="negate-a-boolean，将布尔数组取反"><a href="#negate-a-boolean，将布尔数组取反" class="headerlink" title="negate a boolean，将布尔数组取反"></a>negate a boolean，将布尔数组取反</h1><p>使用 np.logical_not</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Z = np.random.randint(0,2,100)</span><br><span class="line"><span class="built_in">print</span>(Z)</span><br><span class="line">np.logical_not(Z, out=Z)   <span class="comment"># out = Z  保证了 改变原来的数组</span></span><br></pre></td></tr></table></figure>
<h1 id="change-the-sign-of-a-float-inplace"><a href="#change-the-sign-of-a-float-inplace" class="headerlink" title="change the sign of a float inplace"></a>change the sign of a float inplace</h1><p>使用np.negative</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Z = np.random.uniform(-1.0,1.0,10)</span><br><span class="line"><span class="built_in">print</span>(Z)</span><br><span class="line">np.negative(Z, out=Z)</span><br><span class="line">Z</span><br></pre></td></tr></table></figure>
<h1 id="计算点到直线的距离"><a href="#计算点到直线的距离" class="headerlink" title="计算点到直线的距离"></a>计算点到直线的距离</h1><p>可以利用向量积来求，由于向量积是两个向量所围成的平行四边形的面积，所以可以利用面积/底边来求高，这个高即是点到直线的距离</p>
<p>np.cross 是求向量的向量积，有关向量积的内容参考：<a href="https://www.bilibili.com/video/av6341515" target="_blank" rel="noopener">https://www.bilibili.com/video/av6341515</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">78. Consider 2 sets of points P0,P1 describing lines (2d) and a point p, how to compute distance from p to each line i (P0[i],P1[i])? (★★★)</span><br><span class="line"></span><br><span class="line">p0 = np.random.uniform(-10 , 10 , (10 , 2))  <span class="comment"># 直线的一端点</span></span><br><span class="line">p1 = np.random.uniform(-10 , 10 , (10 , 2))  <span class="comment"># 直线的另一端点</span></span><br><span class="line">p = np.random.uniform(-10 , 10 , (1 , 2))    <span class="comment"># 点</span></span><br><span class="line"></span><br><span class="line">np.abs(np.cross(p0 - p , p1 - p,  axis = 1)) / np.linalg.norm(p0 - p1 , axis = 1)  <span class="comment"># 距离 = 面积 / 底边</span></span><br></pre></td></tr></table></figure>
<h1 id="计算矩阵的秩"><a href="#计算矩阵的秩" class="headerlink" title="计算矩阵的秩"></a>计算矩阵的秩</h1><p>先对矩阵进行奇异值分解（SVD)，然后利用 <strong>非0奇异值的个数 = 矩阵的秩</strong>这一性质来求</p>
<p>有关奇异值分解(SVD)，参考: <a href="https://www.cnblogs.com/endlesscoding/p/10033527.html" target="_blank" rel="noopener">https://www.cnblogs.com/endlesscoding/p/10033527.html</a> 和 <a href="https://blog.csdn.net/weixin_43991178/article/details/104906655" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43991178/article/details/104906655</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Z = np.random.uniform(0,1,(10,8))</span><br><span class="line">U, S, V = np.linalg.svd(Z) <span class="comment"># Singular Value Decomposition</span></span><br><span class="line"><span class="built_in">print</span>(S)</span><br><span class="line">rank = np.sum(S &gt; 1e-10)   <span class="comment"># 非0 奇异值的个数 = 秩</span></span><br><span class="line"><span class="built_in">print</span>(rank)</span><br><span class="line"><span class="built_in">print</span>(U.shape , V.shape)</span><br></pre></td></tr></table></figure>
<h1 id="np-tensordot"><a href="#np-tensordot" class="headerlink" title="np.tensordot"></a>np.tensordot</h1><p>np.tensordot，参考： </p>
<p><a href="https://blog.csdn.net/weixin_28710515/article/details/90230842" target="_blank" rel="noopener">https://blog.csdn.net/weixin_28710515/article/details/90230842</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">86. Consider a <span class="built_in">set</span> of p matrices wich shape (n,n) and a <span class="built_in">set</span> of p vectors with shape (n,1). How to compute the sum of of the p matrix products at once? (result has shape (n,1)) (★★★)</span><br><span class="line"></span><br><span class="line">题意：p个(n,n)矩阵和p个(n,1)向量相乘，得到的p个(n,1)向量相加</span><br><span class="line"></span><br><span class="line">p , n = 10 , 20</span><br><span class="line">v1 = np.random.randint(1 , 10 , (p , n , n))</span><br><span class="line">v2 = np.random.randint(1 , 10 , (p , n , 1))</span><br><span class="line"><span class="comment"># v1[: , i , :]对应的是v1 矩阵的行集合</span></span><br><span class="line"><span class="comment"># v2[: , : , i]对应的是v2 的列集合</span></span><br><span class="line">np.tensordot(v1 , v2 , axes = [[0 , 2] , [0 , 1]])  <span class="comment"># 对应的v1 的行和 v2 的列向乘</span></span><br></pre></td></tr></table></figure>
<h1 id="np-argpartition"><a href="#np-argpartition" class="headerlink" title="np.argpartition"></a>np.argpartition</h1><p>np.argpartition: 第一个参数 a 如果是a的话，是升序排列，如果是-a的话，就是降序排列 第二个参数kth，表示要选择的前k个元素，那么就把这前k个元素的<strong>索引</strong>排到前面，<strong>并不会排序</strong>，而只会筛选出这前几位元素，返回值是数组的索引。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randint(0 , 10 , (2 , 20))</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[7, 9, 1, 9, 1, 8, 6, 5, 5, 1, 8, 5, 3, 2, 2, 8, 2, 1, 7, 5],</span></span><br><span class="line"><span class="string">       [6, 6, 7, 0, 7, 8, 0, 2, 2, 9, 1, 3, 1, 5, 2, 1, 0, 3, 0, 0]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">b = np.argpartition(-a , kth = 5 , axis = 1)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[[ 3  1  5 15 10  0 18 11  6 19  8  7 12 13 14  4 16 17  2  9]</span></span><br><span class="line"><span class="string"> [ 5  9  2  1  4  0  6  7  8  3 10 11 12 13 14 15 16 17 18 19]]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">89. How to get the n largest values of an array (★★★)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 先将数组降序排列，然后选出前n 个元素</span></span><br><span class="line">a = np.arange(1000)</span><br><span class="line">np.random.shuffle(a)</span><br><span class="line">a[np.argpartition(-a , kth = 10 , axis = 0)][:10]</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([997, 998, 995, 996, 999, 994, 992, 993, 991, 990])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="记录数组和结构数组"><a href="#记录数组和结构数组" class="headerlink" title="记录数组和结构数组"></a>记录数组和结构数组</h1><p>记录数组和结构数组的定义和区别，参考：<a href="https://blog.csdn.net/qq_27825451/article/details/102457045" target="_blank" rel="noopener">https://blog.csdn.net/qq_27825451/article/details/102457045</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">91. How to create a record array from a regular array? (★★★)</span><br><span class="line"><span class="comment"># 将普通数组转为记录数组</span></span><br><span class="line">Z = np.array([(<span class="string">"Hello"</span>, 2.5, 3),</span><br><span class="line">              (<span class="string">"World"</span>, 3.6, 2)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每一行是一种类型</span></span><br><span class="line">R = np.core.records.fromarrays(Z.T,</span><br><span class="line">                               names=<span class="string">'col1, col2, col3'</span>,</span><br><span class="line">                               formats = <span class="string">'S8, f8, i8'</span>)</span><br><span class="line"><span class="built_in">print</span>(R)</span><br><span class="line"><span class="built_in">print</span>(Z)</span><br><span class="line"><span class="built_in">print</span>(Z.T)</span><br><span class="line"><span class="built_in">print</span>(R.col1) <span class="comment"># 记录数组的特殊索引</span></span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[(b'</span>Hello<span class="string">', 2.5, 3) (b'</span>World<span class="string">', 3.6, 2)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[['</span>Hello<span class="string">' '</span>2.5<span class="string">' '</span>3<span class="string">']</span></span><br><span class="line"><span class="string"> ['</span>World<span class="string">' '</span>3.6<span class="string">' '</span>2<span class="string">']]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[['</span>Hello<span class="string">' '</span>World<span class="string">']</span></span><br><span class="line"><span class="string"> ['</span>2.5<span class="string">' '</span>3.6<span class="string">']</span></span><br><span class="line"><span class="string"> ['</span>3<span class="string">' '</span>2<span class="string">']]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[b'</span>Hello<span class="string">' b'</span>World<span class="string">']</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-unpackbits"><a href="#np-unpackbits" class="headerlink" title="np.unpackbits"></a>np.unpackbits</h1><p>将8位长整型元素数组展开成二进制形式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">95. Convert a vector of ints into a matrix binary representation (★★★)</span><br><span class="line"></span><br><span class="line">I = np.array([0, 1, 2, 4, 8, 16, 32, 64, 128], dtype=np.uint8)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(np.unpackbits(I[:, np.newaxis], axis=1))  <span class="comment"># 将一个8位长整形元素展开成二进制形式</span></span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[[0 0 0 0 0 0 0 0]</span></span><br><span class="line"><span class="string"> [0 0 0 0 0 0 0 1]</span></span><br><span class="line"><span class="string"> [0 0 0 0 0 0 1 0]</span></span><br><span class="line"><span class="string"> [0 0 0 0 0 1 0 0]</span></span><br><span class="line"><span class="string"> [0 0 0 0 1 0 0 0]</span></span><br><span class="line"><span class="string"> [0 0 0 1 0 0 0 0]</span></span><br><span class="line"><span class="string"> [0 0 1 0 0 0 0 0]</span></span><br><span class="line"><span class="string"> [0 1 0 0 0 0 0 0]</span></span><br><span class="line"><span class="string"> [1 0 0 0 0 0 0 0]]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="如何判断一个1d的array的所有元素都相等"><a href="#如何判断一个1d的array的所有元素都相等" class="headerlink" title="如何判断一个1d的array的所有元素都相等"></a>如何判断一个1d的array的所有元素都相等</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([1] * 5)</span><br><span class="line">np.all(a[1:] == a[:-1])  <span class="comment"># a[1:] == a[:-1] 相等于第1个元素和第2个元素向比较，第2个元素和第3个元素向比较，.....，知道第n-1个元素和第n个元素比较，如果都是True，那么说明所有元素都是相等的，如果有任何一个是False，那么就说明不是所有元素都是相等的。</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">True</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">94. Considering a 10x3 matrix, extract rows with unequal values (e.g. [2,2,3]) (★★★)</span><br><span class="line"></span><br><span class="line">题意：筛选出不是所有元素都相等的行</span><br><span class="line"></span><br><span class="line">a = np.random.randint(0 , 4 , (10 , 3))</span><br><span class="line">a</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[2, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 2, 3],</span></span><br><span class="line"><span class="string">       [0, 3, 2],</span></span><br><span class="line"><span class="string">       [2, 3, 3],</span></span><br><span class="line"><span class="string">       [2, 0, 3],</span></span><br><span class="line"><span class="string">       [3, 1, 0],</span></span><br><span class="line"><span class="string">       [1, 2, 3],</span></span><br><span class="line"><span class="string">       [0, 3, 0],</span></span><br><span class="line"><span class="string">       [2, 3, 0],</span></span><br><span class="line"><span class="string">       [1, 1, 1]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">a[~np.all(a[: , 1:] == a[: , :-1] , axis = 1)]</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[2, 0, 0],</span></span><br><span class="line"><span class="string">       [0, 2, 3],</span></span><br><span class="line"><span class="string">       [0, 3, 2],</span></span><br><span class="line"><span class="string">       [2, 3, 3],</span></span><br><span class="line"><span class="string">       [2, 0, 3],</span></span><br><span class="line"><span class="string">       [3, 1, 0],</span></span><br><span class="line"><span class="string">       [1, 2, 3],</span></span><br><span class="line"><span class="string">       [0, 3, 0],</span></span><br><span class="line"><span class="string">       [2, 3, 0]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-indices"><a href="#np-indices" class="headerlink" title="np.indices"></a>np.indices</h1><p>np.indices函数的作用是返回一个代表网格中所有序号的矩阵（给定shape）。</p>
<p>详细，参考：<a href="https://blog.csdn.net/isunLt/article/details/107620828" target="_blank" rel="noopener">https://blog.csdn.net/isunLt/article/details/107620828</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">90. Given an arbitrary number of vectors, build the cartesian product (every combinations of every item) (★★★)</span><br><span class="line"></span><br><span class="line">题意：求笛卡尔积</span><br><span class="line"></span><br><span class="line">求笛卡尔积，比如有三个array，分别是：[1 , 2 , 3] , [5 , 6] , [7 , 8] , 那么我们可以用下标来表示每一个笛卡尔积，那么就是从(0 , 0 , 0)一直到(2 , 1 , 1)，这就类似于网格坐标，所以我们可以先求网格坐标。</span><br><span class="line"></span><br><span class="line">def cartesian(arrays):</span><br><span class="line">    arrays = [np.asarray(x)  <span class="keyword">for</span> x <span class="keyword">in</span> arrays]</span><br><span class="line">    shape = (x.shape[0]  <span class="keyword">for</span> x <span class="keyword">in</span> arrays)  <span class="comment"># 在本样例中 (3 , 2 , 2)</span></span><br><span class="line">    ix = np.indices(shape)</span><br><span class="line">    ix = ix.reshape(3 , -1).T     <span class="comment"># 求出网格</span></span><br><span class="line">    <span class="keyword">for</span> i , arr <span class="keyword">in</span> enumerate(arrays):</span><br><span class="line">        ix[: , i] = arrays[i][ix[: , i]]    <span class="comment"># 将网格坐标替换成相应的值</span></span><br><span class="line">    <span class="built_in">return</span> ix</span><br><span class="line"><span class="built_in">print</span>(cartesian([[1 , 2 , 3] , [4 , 5] , [6 , 7]]))</span><br></pre></td></tr></table></figure>
<h1 id="如何实现等距采样"><a href="#如何实现等距采样" class="headerlink" title="如何实现等距采样"></a>如何实现等距采样</h1><p>等距采样就是每隔相等的距离采一次样。</p>
<p>可以采用<strong>一维线性插值法</strong>来获取不同的距离所对应的样本的值，一维线性插值法的函数：np.interp，详细，参考：<a href="https://blog.csdn.net/hfutdog/article/details/87386901" target="_blank" rel="noopener">https://blog.csdn.net/hfutdog/article/details/87386901</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">98. Considering a path described by two vectors (X,Y), how to sample it using equidistant samples (★★★)?</span><br><span class="line"></span><br><span class="line">题意：给定一条路径的(x , y)，让你等距采样出(x , y)点</span><br><span class="line"></span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">phi = np.arange(0,10*np.pi,0.1)</span><br><span class="line">a =1</span><br><span class="line">x = a*phi*np.cos(phi)</span><br><span class="line">y = a*phi*np.sin(phi)</span><br><span class="line"><span class="built_in">print</span>(x.shape)</span><br><span class="line">dr = (np.diff(x)**2 + np.diff(y)**2)**.5    <span class="comment"># np.diff 计算 后一个元素减去前一个元素，这一步计算的是相邻两个点的距离</span></span><br><span class="line">r = np.zeros_like(x)</span><br><span class="line">r[1:] = np.cumsum(dr)</span><br><span class="line"><span class="built_in">print</span>(r)</span><br><span class="line">r_int = np.linspace(0, r.max(), 80)    <span class="comment"># 创建等差数列</span></span><br><span class="line">x_int = np.interp(r_int, r, x)  <span class="comment">#插值   一维线性插值，</span></span><br><span class="line">y_int = np.interp(r_int, r, y)  <span class="comment">#插值</span></span><br><span class="line">plt.subplot(133)</span><br><span class="line">plt.plot(x , y , x_int,y_int)</span><br></pre></td></tr></table></figure>
<h1 id="np-diff"><a href="#np-diff" class="headerlink" title="np.diff"></a>np.diff</h1><p>后一个元素减去前一个元素</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.diff(np.array([1 , 2 , 3 , 4]))</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([1, 1, 1])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="np-inner"><a href="#np-inner" class="headerlink" title="np.inner"></a>np.inner</h1><p>返回两个向量的内积</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.inner(np.array([1 , 2 , 3]) , np.array([1 , 2 , 3]))</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">14</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="ndarray-的-slice-切片操作"><a href="#ndarray-的-slice-切片操作" class="headerlink" title="ndarray 的 slice 切片操作"></a>ndarray 的 slice 切片操作</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(25).reshape(5 , 5)</span><br><span class="line">a[[slice(0 , 3) , slice(0 , 3)]]</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">array([[ 0,  1,  2],</span></span><br><span class="line"><span class="string">       [ 5,  6,  7],</span></span><br><span class="line"><span class="string">       [10, 11, 12]])</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h1 id="x-setitem-i-y-lt-gt-x-i-y"><a href="#x-setitem-i-y-lt-gt-x-i-y" class="headerlink" title="x.setitem(i, y) &lt;==&gt; x[i]=y"></a>x.<strong>setitem</strong>(i, y) &lt;==&gt; x[i]=y</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">85. Create a 2D array subclass such that Z[i,j] == Z[j,i] (★★★)</span><br><span class="line"></span><br><span class="line">题意：让我们创造出来的array不仅一开始的属性是对称矩阵，而且修改后也能是对称矩阵。</span><br><span class="line"></span><br><span class="line">class Symetric(np.ndarray):</span><br><span class="line"><span class="comment">#     x.__setitem__(i, y) &lt;==&gt; x[i]=y</span></span><br><span class="line"><span class="comment">#    继承自ndarray 的 __setitem__，不重写的话是 x.__setitem__((i,j), y) &lt;==&gt; x[(i,j)]=y</span></span><br><span class="line"><span class="comment">#    重写后： x.__setitem__(i, y) &lt;==&gt; x[(i,j)] = x[(j,i)] = y</span></span><br><span class="line">    def __setitem__(self, index, value):</span><br><span class="line">        i,j = index</span><br><span class="line">        super(Symetric, self).__setitem__((i,j), value)</span><br><span class="line">        super(Symetric, self).__setitem__((j,i), value)</span><br><span class="line"></span><br><span class="line">def symetric(Z):</span><br><span class="line">     <span class="comment"># np.asarray(Z + Z.T - np.diag(Z.diagonal())) 这样保证了一开始的时候是对称矩阵，但是不能使得修改某几个元素后的矩阵是对称矩阵，所以我们需要创造一个子类，使得这个子类具有这样的属性</span></span><br><span class="line">    <span class="built_in">return</span> np.asarray(Z + Z.T - np.diag(Z.diagonal())).view(Symetric)</span><br><span class="line"></span><br><span class="line">a = np.random.randint(0,10,(5,5))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[[2 7 2 0 6]</span></span><br><span class="line"><span class="string"> [4 9 9 2 6]</span></span><br><span class="line"><span class="string"> [0 3 1 1 6]</span></span><br><span class="line"><span class="string"> [6 1 8 0 9]</span></span><br><span class="line"><span class="string"> [8 4 2 2 7]]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line">S = symetric(a)</span><br><span class="line">S[2,3] = 42</span><br><span class="line"><span class="built_in">print</span>(S)</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">[[ 2 11  2  6 14]</span></span><br><span class="line"><span class="string"> [11  9 12  3 10]</span></span><br><span class="line"><span class="string"> [ 2 12  1 42  8]</span></span><br><span class="line"><span class="string"> [ 6  3 42  0 11]</span></span><br><span class="line"><span class="string"> [14 10  8 11  7]]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure>
<h2 id="ndarray-子类实体的创建"><a href="#ndarray-子类实体的创建" class="headerlink" title="ndarray 子类实体的创建"></a>ndarray 子类实体的创建</h2><p>参考：<a href="https://blog.csdn.net/SAKURASANN/article/details/102750468" target="_blank" rel="noopener">https://blog.csdn.net/SAKURASANN/article/details/102750468</a></p>
<h1 id="63-Create-an-array-class-that-has-a-name-attribute-★★☆"><a href="#63-Create-an-array-class-that-has-a-name-attribute-★★☆" class="headerlink" title="63. Create an array class that has a name attribute (★★☆)"></a>63. Create an array class that has a name attribute (★★☆)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python中cls代表的是类的本身，相对应的self则是类的一个实例对象。</span></span><br><span class="line">class NamedArray(np.ndarray):</span><br><span class="line">       <span class="comment"># __new__ 用于创建一个实体</span></span><br><span class="line">    def __new__(cls, array, name=<span class="string">"no name"</span>):</span><br><span class="line">        <span class="comment">#print(array)</span></span><br><span class="line">        obj = np.asarray(array).view(cls)  <span class="comment"># 得到一个ndarray 的子类的一个实体</span></span><br><span class="line">        <span class="comment">#obj = super().__new__(cls , array)</span></span><br><span class="line">        obj.name = name</span><br><span class="line">        <span class="built_in">return</span> obj</span><br><span class="line"><span class="comment">#     def __array_finalize__(self, obj):</span></span><br><span class="line"><span class="comment">#         if obj is None: return</span></span><br><span class="line"><span class="comment">#         self.info = getattr(obj, 'name', "no name")</span></span><br><span class="line"></span><br><span class="line">Z = NamedArray(np.arange(10), <span class="string">"lzclzc"</span>)</span><br><span class="line"><span class="built_in">print</span> (Z.name , <span class="built_in">type</span>(Z) , Z)</span><br></pre></td></tr></table></figure>
<h2 id="new"><a href="#new" class="headerlink" title="__new__"></a>__new__</h2><p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/sj2050/article/details/81172022" target="_blank" rel="noopener">https://blog.csdn.net/sj2050/article/details/81172022</a></li>
<li><a href="http://c.biancheng.net/view/5484.html" target="_blank" rel="noopener">http://c.biancheng.net/view/5484.html</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/numpy/" rel="tag"># numpy</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/09/09/%E5%9F%BA%E4%BA%8E%E5%9B%BE%E7%9A%84%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2/" rel="next" title="基于图的图像分割">
                <i class="fa fa-chevron-left"></i> 基于图的图像分割
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.gif"
                alt="lzc" />
            
              <p class="site-author-name" itemprop="name">lzc</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
                
              
                  <span class="site-state-item-count">50</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#查看numpy的版本和配置"><span class="nav-number">1.</span> <span class="nav-text">查看numpy的版本和配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-zeros"><span class="nav-number">2.</span> <span class="nav-text">np.zeros</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-ndarray-itemsize"><span class="nav-number">3.</span> <span class="nav-text">np.ndarray.itemsize</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#reverse一个vector"><span class="nav-number">4.</span> <span class="nav-text">reverse一个vector</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#寻找ndarray的非0元素的下标"><span class="nav-number">5.</span> <span class="nav-text">寻找ndarray的非0元素的下标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#创建一个单位矩阵"><span class="nav-number">6.</span> <span class="nav-text">创建一个单位矩阵</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-random-random"><span class="nav-number">7.</span> <span class="nav-text">np.random.random()</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#寻找ndarray的最大值和最小值"><span class="nav-number">8.</span> <span class="nav-text">寻找ndarray的最大值和最小值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使一个array的周围都是0"><span class="nav-number">9.</span> <span class="nav-text">使一个array的周围都是0</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-nan和np-inf的一些运算"><span class="nav-number">10.</span> <span class="nav-text">np.nan和np.inf的一些运算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-diag-v-k"><span class="nav-number">11.</span> <span class="nav-text">np.diag(v , k)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#创建一个checkerboard-pattern的矩阵"><span class="nav-number">12.</span> <span class="nav-text">创建一个checkerboard pattern的矩阵</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#方法1："><span class="nav-number">12.1.</span> <span class="nav-text">方法1：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法2："><span class="nav-number">12.2.</span> <span class="nav-text">方法2：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#给定一个array的维度，如何查看第i个元素的下标是多少"><span class="nav-number">13.</span> <span class="nav-text">给定一个array的维度，如何查看第i个元素的下标是多少</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#创建一个dtype来描述-RGBA"><span class="nav-number">14.</span> <span class="nav-text">创建一个dtype来描述(RGBA)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将array中大于3且小于8的数取反"><span class="nav-number">15.</span> <span class="nav-text">将array中大于3且小于8的数取反</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#求两个array的交集"><span class="nav-number">16.</span> <span class="nav-text">求两个array的交集</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#获取当前的今天和明天的日期"><span class="nav-number">17.</span> <span class="nav-text">获取当前的今天和明天的日期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#获取2016年7月的全部日期（以天为单位）"><span class="nav-number">18.</span> <span class="nav-text">获取2016年7月的全部日期（以天为单位）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#提取正数的整数部分-4-种方法"><span class="nav-number">19.</span> <span class="nav-text">提取正数的整数部分 (4 种方法)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-trunc"><span class="nav-number">20.</span> <span class="nav-text">np.trunc</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#利用生成器方法来生成一个array"><span class="nav-number">21.</span> <span class="nav-text">利用生成器方法来生成一个array</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-add-reduce-ndarray-axis"><span class="nav-number">22.</span> <span class="nav-text">np.add.reduce(ndarray , axis)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使一个array-只读-read-only"><span class="nav-number">23.</span> <span class="nav-text">使一个array 只读(read-only)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将直角坐标变为极坐标"><span class="nav-number">24.</span> <span class="nav-text">将直角坐标变为极坐标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将矩阵的每列的最小值置1-特殊的切片方式"><span class="nav-number">25.</span> <span class="nav-text">将矩阵的每列的最小值置1 (特殊的切片方式)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#求-0-1-x-1-0-区域内所有坐标"><span class="nav-number">26.</span> <span class="nav-text">求[0,1]x[1,0]区域内所有坐标</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#np-meshgrid"><span class="nav-number">26.1.</span> <span class="nav-text">np.meshgrid</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-subtract-outer"><span class="nav-number">27.</span> <span class="nav-text">np.subtract.outer</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#查看numpy的各种类型的最大值和最小值"><span class="nav-number">28.</span> <span class="nav-text">查看numpy的各种类型的最大值和最小值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-atleast-2d"><span class="nav-number">29.</span> <span class="nav-text">np.atleast_2d</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#scipy-spatial-distance-cdist"><span class="nav-number">30.</span> <span class="nav-text">scipy.spatial.distance.cdist</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#原地将float32-转为-int32"><span class="nav-number">31.</span> <span class="nav-text">原地将float32 转为 int32</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-ndenumerate"><span class="nav-number">32.</span> <span class="nav-text">np.ndenumerate</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-ndindex"><span class="nav-number">33.</span> <span class="nav-text">np.ndindex</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#生成一个2D-Gaussian-like-array"><span class="nav-number">34.</span> <span class="nav-text">生成一个2D Gaussian-like array</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#高斯函数和正态分布"><span class="nav-number">34.1.</span> <span class="nav-text">高斯函数和正态分布</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-put"><span class="nav-number">35.</span> <span class="nav-text">np.put</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-random-choice"><span class="nav-number">36.</span> <span class="nav-text">np.random.choice</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#keepdims-参数"><span class="nav-number">37.</span> <span class="nav-text">keepdims 参数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数组按第n列排序"><span class="nav-number">38.</span> <span class="nav-text">数组按第n列排序</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-flat"><span class="nav-number">39.</span> <span class="nav-text">np.flat</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-bincount"><span class="nav-number">40.</span> <span class="nav-text">np.bincount</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-unique"><span class="nav-number">41.</span> <span class="nav-text">np.unique</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#在切片时加-None，补充一维"><span class="nav-number">42.</span> <span class="nav-text">在切片时加 None，补充一维</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如何交换array的一行"><span class="nav-number">43.</span> <span class="nav-text">如何交换array的一行</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-ndarray-repeat"><span class="nav-number">44.</span> <span class="nav-text">np.ndarray.repeat</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-roll"><span class="nav-number">45.</span> <span class="nav-text">np.roll</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-repeat"><span class="nav-number">46.</span> <span class="nav-text">np.repeat</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-cumsum"><span class="nav-number">47.</span> <span class="nav-text">np.cumsum</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#stride-tricks-as-strided"><span class="nav-number">48.</span> <span class="nav-text">stride_tricks.as_strided</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#negate-a-boolean，将布尔数组取反"><span class="nav-number">49.</span> <span class="nav-text">negate a boolean，将布尔数组取反</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#change-the-sign-of-a-float-inplace"><span class="nav-number">50.</span> <span class="nav-text">change the sign of a float inplace</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#计算点到直线的距离"><span class="nav-number">51.</span> <span class="nav-text">计算点到直线的距离</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#计算矩阵的秩"><span class="nav-number">52.</span> <span class="nav-text">计算矩阵的秩</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-tensordot"><span class="nav-number">53.</span> <span class="nav-text">np.tensordot</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-argpartition"><span class="nav-number">54.</span> <span class="nav-text">np.argpartition</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#记录数组和结构数组"><span class="nav-number">55.</span> <span class="nav-text">记录数组和结构数组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-unpackbits"><span class="nav-number">56.</span> <span class="nav-text">np.unpackbits</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如何判断一个1d的array的所有元素都相等"><span class="nav-number">57.</span> <span class="nav-text">如何判断一个1d的array的所有元素都相等</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-indices"><span class="nav-number">58.</span> <span class="nav-text">np.indices</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如何实现等距采样"><span class="nav-number">59.</span> <span class="nav-text">如何实现等距采样</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-diff"><span class="nav-number">60.</span> <span class="nav-text">np.diff</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#np-inner"><span class="nav-number">61.</span> <span class="nav-text">np.inner</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ndarray-的-slice-切片操作"><span class="nav-number">62.</span> <span class="nav-text">ndarray 的 slice 切片操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#x-setitem-i-y-lt-gt-x-i-y"><span class="nav-number">63.</span> <span class="nav-text">x.setitem(i, y) &lt;&#x3D;&#x3D;&gt; x[i]&#x3D;y</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ndarray-子类实体的创建"><span class="nav-number">63.1.</span> <span class="nav-text">ndarray 子类实体的创建</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#63-Create-an-array-class-that-has-a-name-attribute-★★☆"><span class="nav-number">64.</span> <span class="nav-text">63. Create an array class that has a name attribute (★★☆)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#new"><span class="nav-number">64.1.</span> <span class="nav-text">__new__</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lzc</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">51.7k</span>
  
</div>





  
  <!-- <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div> 



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>  -->

<div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv" style='display:none'>
    本站总访问量 <span id="busuanzi_value_site_pv"></span> 次
    <span class="post-meta-divider">|</span>
</span>
<span id="busuanzi_container_site_uv" style='display:none'>
    有<span id="busuanzi_value_site_uv"></span>人看过我的博客啦
</span>
</div>





        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
